<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="data:image/png;base64, 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" />
    <title>接龙红包</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">

    <script>window.console = window.console || function(t) {};</script>
    <script>if (document.location.search.match(/type=embed/gi)) {window.parent.postMessage("resize", "*");}</script>
</head>

<body translate="no">
    <div class="jumbotron m-0 p-0 bg-transparent">
        <div class="row m-0 p-0 position-relative">
            <div class="col-12 p-0 m-0 position-absolute" style="right: 0px;">
                <div class="card border-0 rounded" style="box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.10), 0 6px 10px 0 rgba(0, 0, 0, 0.01); overflow: hidden; height: 100vh;">
                    <div class="card-header p-1 bg-light border border-top-0 border-left-0 border-right-0" style="color: rgba(96, 125, 139,1.0);">
                        <img class="rounded float-left" style="width: 50px; height: 50px;" src="data:image/png;base64, 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" />
                        <h6 class="float-left" style="margin: 0px; margin-left: 10px;"> 红包服务器 <i class="fa fa-check text-primary" title="在线" aria-hidden="true"></i> </br><small> USTC </small></h6>
                        <a class="float-right btn btn-lg" href="idl.json" download><i class="fa fa-download" title="下载成语数据库"></i></a>
                    </div>
                    <div class="card bg-sohbet border-0 m-0 p-0" style="height: 90vh;">
                        <div id="sohbet" class="card border-0 m-0 p-0 position-relative bg-transparent" style="overflow-y: auto; height: 100vh;">
                            <div class="balon2 p-0 m-0 position-relative" style="margin-bottom: 0px !important; margin-left: 10px !important;">
                                <a class="float-left">
                                <p> 接龙红包大放送啦~ 规则如下:</p>
                                <p> 1. 出现过的成语不能重复使用 </p>
                                <p> 2. 如果服务器无法接龙成语即可领取红包 </p>
                                <p> 3. 连续领取四次红包即可获得 flag </p>
                                </a>
                            </div>
                            <div class="balon2 p-2 m-0 position-relative"><a class="float-left"> <div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div> </a></div>
                        </div>
                    </div>
                    <div class="w-100 card-footer p-0 bg-light border border-bottom-0 border-left-0 border-right-0">
                        <form id="emit" class="m-0 p-0" action="#" autocomplete="off">
                            <div class="row m-0 p-0">
                                <div class="col-10 m-0 p-1">
                                    <input id="text" class="mw-100 border rounded form-control" type="text" name="text" title="成语输入" placeholder="请输入一个成语..." required>
                                </div>
                                <div class="col-2 m-0 p-1">
                                    <button id="sendBtn" class="btn btn-outline-secondary rounded border w-100" title="接龙!" type="submit" style="padding-right: 16px;" disabled><i class="fa fa-paper-plane" aria-hidden="true"></i></button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" integrity="sha256-yr4fRk/GU1ehYJPAs8P4JlTgu0Hdsp4ZKrx8bDEDC3I=" crossorigin="anonymous"></script>

    <script>
    function createMsg(role, msg) {
        var time = new Date();
        time = time.toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true });
        if (role == "me") $("#sohbet").append("<div class=\"balon1 p-2 m-0 position-relative\" data-is=\"You - " + time + "\"><a class=\"float-right\"> " + msg + " </a></div>");
        else $("#sohbet").append("<div class=\"balon2 p-2 m-0 position-relative\" data-is=\"Server - " + time + "\"><a class=\"float-left\"> " + msg + " </a></div>");
        $('#sohbet').scrollTop($('#sohbet')[0].scrollHeight);
    }

    $(document).ready(function(){
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i=0;i<vars.length;i++) {
                    var pair = vars[i].split("=");
                    if(pair[0] == variable){return pair[1];}
            }
            return(false);
        }
        var token = getQueryVariable('token');
        if (token) {
            try {
                token = decodeURIComponent(token);
            }
            catch(err) {
                token = ''
            }
            // this will NOT effect other cookies
            document.cookie = 'token=' + token;
            location.href = location.origin;
        }

        var socket = io.connect(window.location.href, {
            transports: ['websocket']
        });
        socket.on('reply', function(msg) {
            if ($('#sendBtn')[0].disabled) {
                $("#sohbet").children().last().remove();
                $('#sendBtn')[0].disabled = false;
            }
            createMsg("you", msg.data);
            });
        socket.on('error', function(msg) {
            $("#sohbet").children().last().remove();
            createMsg("you", msg.data);
            $('#sendBtn')[0].disabled = true;
            socket.disconnect();
            });
        socket.on('disconnect', function() {
            createMsg("you", "链接已断开");
            $('#sendBtn')[0].disabled = true;
            });
        $('form#emit').submit(function(event) {
            createMsg("me", $('#text').val());
            createMsg("you", "<div class=\"spinner-border\" role=\"status\"><span class=\"sr-only\">Loading...</span></div>");
            this[1].disabled = true;
            socket.emit('go', {data: $('#text').val()});
            this[0].value = '';
            return false;
        });
    });
    </script>
</body>
</html>
